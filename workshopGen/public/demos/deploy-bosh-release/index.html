<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.51" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/images/favicon.png" type="image/x-icon" />
    <title> :: Pivotal Workshop</title>

    
    <link href="/css/nucleus.css?1542292529" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1542292529" rel="stylesheet">
    <link href="/css/hybrid.css?1542292529" rel="stylesheet">
    <link href="/css/featherlight.min.css?1542292529" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1542292529" rel="stylesheet">
    <link href="/css/auto-complete.css?1542292529" rel="stylesheet">
    <link href="/css/theme.css?1542292529" rel="stylesheet">
    <link href="/css/hugo-theme.css?1542292529" rel="stylesheet">
    

    <script src="/js/jquery-2.x.min.js?1542292529"></script>

    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/demos/deploy-bosh-release/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="">
    <svg x="0px" y="0px" width="50%" height="100%" viewBox="0 0 291.93 68.4" xmlns="http://www.w3.org/2000/svg">
        <g class="cls-1">
        <path style="fill:#008775;" d="M131.51,61.59H121.14v-10h10.37v10Zm0,57.21h-10.4V69h10.4V118.8Z" transform="translate(-66.72 -51.56)"></path>
        <path style="fill:#008775;" d="M191.48,69L177,112c-2.49,7-6.92,7.94-10.52,7.94-5.33,0-8.54-2.45-10.44-7.93L144,76.27h-4.77V69h12.45l12.44,40c0.54,1.71.88,2.73,2.39,2.73s1.88-1,2.38-2.73l12.69-40h9.92Z" transform="translate(-66.72 -51.56)"></path>
        <path style="fill:#008775;" d="M217.08,69c13.45,0,22.83,8.87,22.83,21.59v7.83c0,12.7-9.38,21.59-22.83,21.59s-22.84-8.89-22.84-21.59V90.54c0-12.71,9.4-21.59,22.84-21.59m0,42.8c8,0,13-6.08,13-13.38V90.54c0-7.3-4.94-13.39-13-13.39-8.52,0-13,6.08-13,13.39v7.83c0,7.3,4.7,13.38,13,13.38" transform="translate(-66.72 -51.56)"></path>
        <path style="fill:#008775;" d="M322.9,70.55a88.57,88.57,0,0,0-19.25-2.3c-13.65,0-22.12,8.61-22.12,22.48v5.46c0,13.86,8.47,22.6,22.12,22.6,0.32,0,2.74,0,3.85-.1v-8.37c-0.42,0-3.54.11-3.85,0.11-7.42,0-12.42-5.72-12.42-14.24V90.73c0-8.52,5-14.24,12.42-14.24a72.93,72.93,0,0,1,10.18.64l0.56,0.12V118.8h10.39V72.27c0-.89,0-1.23-1.89-1.73" transform="translate(-66.72 -51.56)"></path>
        <rect style="fill:#008775;" height="67.24" width="10.39" x="268.07"></rect>
        <path style="fill:#008775;" d="M85,51.56H66.72v67.23H77.53V60.91h6.34c1.35,0,2.49.07,3.64,0.09,9.37,0.18,14,3.9,14,11.18,0,0.29,0,.49,0,0.79,0,6.74-3.7,11.21-13.92,11.21-1,0-2,0-3,0,0,2.58,0,7.36,0,9,1.05,0.05,2,.09,3.05.09,14.66,0,25-5.76,25-20.23,0-.28,0-0.58,0-0.87,0-15-11.28-20.64-27.61-20.64" transform="translate(-66.72 -51.56)"></path>
        <path style="fill:#008775;" d="M258.37,58.21V69h16.93V77H258.37v29c0,4.56,2.91,4.68,7.13,4.68h9.8v8.06H262c-9.81,0-14.18-3.93-14.18-12.74V59.65Z" transform="translate(-66.72 -51.56)"></path>
        </g>
        <path style="fill:#008775;" d="M350,114.44a4.34,4.34,0,1,1,4.34,4.36A4.36,4.36,0,0,1,350,114.44Zm4.35-3.75a3.73,3.73,0,1,0,3.71,3.73A3.73,3.73,0,0,0,354.31,110.7Zm-1,6.05h-0.5V112h1.33c1.2,0,1.78.55,1.78,1.43a1.39,1.39,0,0,1-1,1.35l1.22,1.95h-0.6l-1.13-1.83-1.13.07v1.76Zm0.85-2.24a1.09,1.09,0,0,0,1.26-1c0-.67-0.42-1-1.33-1h-0.8v2.07Z" transform="translate(-66.72 -51.56)"></path>
    </svg>
    <p>PLATFORM ARCHITECTURE</p>
  </a>
  
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-close"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1542292529"></script>
<script type="text/javascript" src="/js/auto-complete.js?1542292529"></script>
<script type="text/javascript">
    
        var baseurl = "";
    
</script>
<script type="text/javascript" src="/js/search.js?1542292529"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics" id="yup">

        
          
          


 
  
    
    <li data-nav-id="/workshop/" title="Fiserv/THD OpsMan Deep Dive Workshop" class="dd-item 
        
        
        
        ">
      <a href="/workshop/">
          Fiserv/THD OpsMan Deep Dive Workshop
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/concepts/" title="Concepts" class="dd-item 
        
        
        
        ">
      <a href="/concepts/">
          Concepts
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/demos/" title="Demos" class="dd-item 
        parent
        
        
        ">
      <a href="/demos/">
          Demos
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/demos/bbl-up/" title="" class="dd-item ">
        <a href="/demos/bbl-up/">
        BBL Up
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/demos/deploy-opsman-pipeline/" title="" class="dd-item ">
        <a href="/demos/deploy-opsman-pipeline/">
        Deploy OpsMan
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/demos/create-bosh-release/" title="" class="dd-item ">
        <a href="/demos/create-bosh-release/">
        Create BOSH Release
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/demos/deploy-bosh-release/" title="" class="dd-item active">
        <a href="/demos/deploy-bosh-release/">
        Deploy BOSH Release
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/demos/example-stemcell/" title="" class="dd-item ">
        <a href="/demos/example-stemcell/">
        Example Stemcell
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/demos/init/" title="" class="dd-item ">
        <a href="/demos/init/">
        Service Broker Init
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/demos/catalog/" title="" class="dd-item ">
        <a href="/demos/catalog/">
        Service Broker Catalog
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="/demos/deploy-bosh-release/" selected>English</option>
                    
                  
              
                  
              
                  
              
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
      </ul>
    </section>
    
    <section id="footer">
      <p>Built with <i class="fas fa-heart"></i></a> by <a href="https://pivotal.io">Pivotal</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Pivotal Workshop</a> > <a href='/demos/'>Demos</a> > 
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#goal">Goal</a></li>
<li><a href="#part-1-create-the-manifest">Part 1: Create the manifest</a></li>
<li><a href="#part-2-deploy">Part 2: Deploy!</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1></h1>
          

        




<h2 id="goal">Goal</h2>

<p>Before we can deploy a BOSH release we need to define how the release should be deployed. Do we deploy 3 or 1 instances? Do we give it an IP of 10.0.0.1 or 10.0.0.50? etc&hellip;
As you can see there are many different ways to deploy the release. With BOSH we call this definition a BOSH Manifest. Lets create a manifest and deploy our sample-bosh-release.</p>

<h2 id="part-1-create-the-manifest">Part 1: Create the manifest</h2>

<p>Using your favorite command-line text editor to create a <code>sample-bosh-manifest.yml</code> text file.</p>

<pre><code>name: sample-bosh-deployment

releases:
- {name: bosh-release, version: latest}

stemcells:
- alias: trusty
  os: ubuntu-trusty
  version: latest

instance_groups:
- name: sample_vm
  instances: 1
  networks:
  - name: default
  azs: [z1]
  jobs:
  - name: sample_job
    release: bosh-release
  stemcell: trusty
  vm_type: default
update:
  canaries: 1
  max_in_flight: 10
  canary_watch_time: 1000-100000
  update_watch_time: 1000-100000
</code></pre>

<ul>
<li><p>The goal of this deployment is to deploy a single VM that runs our sample_job.</p></li>

<li><p><code>name</code> - the unique name of this deployment within a BOSH director. When a BOSH director receives subsequent deployment manifests with the same name it will assume it is an upgrade of the existing deployment.</p></li>

<li><p><code>releases</code> - lists the specific BOSH release versions that are to be used, ie the one we just made.</p></li>

<li><p><code>instance_groups</code> - lists the sets of instances (VMs) that will run the same job templates/packages as each other. Instance groups will be deployed as long running instances by default.</p></li>

<li><p><code>stemcells</code> - lists the stemcells (discussed earlier) we will run our instances with.</p></li>
</ul>

<h2 id="part-2-deploy">Part 2: Deploy!</h2>

<ol>
<li><p>Here is where all the magic happens! By BOSH <code>deploy</code>ing we combine the Stemcells, Releases, and Manifest to create our software system. This can take a few minutes.</p>

<p><code>$ bosh -d sample-bosh-deployment deploy sample-bosh-manifest.yml</code></p>

<ul>
<li><p>If successful, you should see something similar to the following:</p>

<pre><code>Task 80

Task 80 | 18:00:44 | Preparing deployment: Preparing deployment (00:00:00)
Task 80 | 18:00:44 | Preparing package compilation: Finding packages to compile (00:00:00)
Task 80 | 18:00:44 | Compiling packages: sample_app/3698d0cc632d3162a6a2fedcd36ac00364a7cd64 (00:00:57)
Task 80 | 18:04:39 | Creating missing vms: sample_vm/71160b1a-faaa-487c-b107-7d4ed8fce7ce (0)
Task 80 | 18:05:28 | Updating instance sample_vm: sample_vm/71160b1a-faaa-487c-b107-7d4ed8fce7ce (0) (canary)

Task 80 Started  Mon Nov 27 18:00:44 UTC 2017
Task 80 Finished Mon Nov 27 18:05:46 UTC 2017
Task 80 Duration 00:05:02
Task 80 done

Succeeded
</code></pre></li>
</ul></li>
</ol>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/demos/create-bosh-release/" title=""> <i class="fas fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/demos/example-stemcell/" title="" style="margin-right: 0px;"><i class="fas fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1542292529"></script>
    <script src="/js/perfect-scrollbar.min.js?1542292529"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1542292529"></script>
    <script src="/js/jquery.sticky.js?1542292529"></script>
    <script src="/js/featherlight.min.js?1542292529"></script>
    <script src="/js/html5shiv-printshiv.min.js?1542292529"></script>
    <script src="/js/highlight.pack.js?1542292529"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js?1542292529"></script>
    <script src="/js/learn.js?1542292529"></script>
    <script src="/js/hugo-learn.js?1542292529"></script>

    <link href="/mermaid/mermaid.css?1542292529" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1542292529"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

